:css
  .message { border-bottom: 1px solid #ccc; padding: 20px; }
  .field-name { text-align: right; padding: 0 20px 0 0; color: #999; }
  .info { text-align: right; padding: 0 0 0 0; color: #999; text-align: left; color: #222;}

= render 'admin/nav', {active: 'ride_zones'}

%h2{style: 'margin: 30px 0 40px 0'}
  = @ride_zone.name

%hr
Add dispatcher:
%select#add-dispatcher
  %option
  = options_for_select( User.all.map{ |u| [u.name, u.id] } )

%hr
Dispatchers:

- if @dispatchers.present?
  %ul
    - @dispatchers.each do |dispatcher|
      %li
        = dispatcher.name
%hr

%h6
  Conversations

  %span{style: 'margin-left: 50px; font-weight: normal; font-size: 16px;'}
    filter: &nbsp;&nbsp;

  %select#conversation-status
    %option
      all
    - Conversation.statuses.each do |status|
      - selected = (params[:status].present? && params[:status] == status[0]) ? 'selected' : ''

      - if selected.present?
        %option{selected: selected}
          = status[0]
      - else
        %option
          = status[0]

  :javascript
    $('#conversation-status').change(function() {
      console.log('bar');
      window.location = "/admin/ride_zones/#{@ride_zone.id}?status=" + $(this).val();
    });

    $('#add-dispatcher').change(function() {
      console.log('fu');
      window.location = "/admin/ride_zones/#{@ride_zone.id}/add_dispatcher?user_id=" + $(this).val();
    });


#conversations
  - if @conversations.present?
    - @conversations.each do |conversation|
      .conversation
        %table
          %tr
            %td.field-name
              Started:
            %td.info
              = conversation.created_at.in_time_zone('Pacific Time (US & Canada)').strftime("%l:%M%P, %-m/%-d %Z")
          %tr
            %td.field-name
              From:
            %td.info
              = conversation.from_phone.phony_formatted(normalize: :US, spaces: '-')
          %tr
            %td.field-name
              Number of messages
            %td.info
              = conversation.messages.count
          %tr
            %td.field-name
              Status:
            %td.info
              = conversation.status