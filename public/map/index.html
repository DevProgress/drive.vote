<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Map Wrapper</title>
	<link rel="stylesheet" href="https://writ.cmcenroe.me/1.0.3/writ.min.css">
	<script src="Map.js"></script>
    <style>
      body {
        width: 80%;
        margin: 2em;
      }
      #gmap, #lmap {
        height: 300px;
        margin: 1em 0;
      }
    </style>
</head>
<body>
    <h1>Simple Map Wrapper</h1>
    <p>
        Two maps generated with almost-identical code, showing a simple
        wrapper for Google Maps or OpenStreetMap-based Leaflet.
    </p>
    <p>
        Code for each looks approximately like this; view source for details:
    </p>
    <pre>
new Map(document.getElementById('map'),
        function(map)
        {
          // Add a bunch of markers
          var m1 = map.addMarker(37.770444, -122.434960, Map.icons.voter, 'Hello World!', 'http://example.com');
          var m2 = map.addMarker(37.769079, -122.433674, Map.icons.poll,  'Hello World!');
          var m3 = map.addMarker(37.771612, -122.426836, Map.icons.driver);

          // Update each of the markers
          map.updateMarker(m1, 37.770709, -122.435082, Map.icons.driver, 'Goodbye World!', 'http://example.com');
          map.updateMarker(m2, 37.768962, -122.433387, Map.icons.voter,  'Goodbye World!');
          map.updateMarker(m3, 37.771455, -122.428098, Map.icons.poll);
        },
        {lat: 37.77073, lon: -122.43020, zoom: 16});
</pre>
    <p>
        Defaults are mostly left uncustomized, except for default scrollwheel zoom, which
        <a href="http://content.stamen.com/stamens-checklist-for-maps">should not be used in a non-fullscreen map</a>.
    </p>
    <div id="gmap"></div>
    <div id="lmap"></div>
    <script>
    
    
        function on_loaded(map)
        {
            var m1 = map.addMarker(37.770444, -122.434960, Map.icons.voter, 'Hello World!', 'http://example.com');
            var m2 = map.addMarker(37.769079, -122.433674, Map.icons.poll, 'Hello World!');
            var m3 = map.addMarker(37.771612, -122.426836, Map.icons.driver);
            
            window.setTimeout(function() {
                map.updateMarker(m1, 37.770709, -122.435082, Map.icons.driver, 'Goodbye World!', 'http://example.com');
                map.updateMarker(m2, 37.768962, -122.433387, Map.icons.voter,  'Goodbye World!');
                map.updateMarker(m3, 37.771455, -122.428098, Map.icons.poll);
                }, 3000);
        }
        
        var gmap = new Map(document.getElementById('gmap'), on_loaded,
                           {'google_api_key': 'AIzaSyDyJ3LTbJGAEIKjqYj3-gFDbAZ3BLo6sGo',
                            lat: 37.77073, lon: -122.43020, zoom: 16});

        var lmap = new Map(document.getElementById('lmap'), on_loaded,
                           {lat: 37.77073, lon: -122.43020, zoom: 16});

    </script>
</body>
</html>
